<Window x:Class="MemoryGame.UI.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Memory Game" Height="520" Width="420">

    <Window.Resources>

    </Window.Resources>


    <DockPanel Margin="12">
        <StackPanel Orientation="Horizontal" DockPanel.Dock="Top" Margin="0 0 0 10">
            <TextBlock Text="Username:" VerticalAlignment="Center"/>
            <TextBox Width="120" Text="{Binding Username, UpdateSourceTrigger=PropertyChanged}"/>
            <Button Content="Start" Command="{Binding StartCommand}" />
            <TextBlock Text="Moves:" Margin="12,0,4,0" VerticalAlignment="Center"/>
            <TextBlock Text="{Binding Moves}" VerticalAlignment="Center"/>
            <TextBlock Text="Time:" Margin="12,0,4,0" VerticalAlignment="Center"/>
            <TextBlock Text="{Binding Elapsed}" VerticalAlignment="Center"/>
        </StackPanel>

        <ItemsControl ItemsSource="{Binding Cards}">
            <ItemsControl.ItemsPanel>
                <ItemsPanelTemplate>
                    <UniformGrid Rows="4" Columns="4"/>
                </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>

            <ItemsControl.ItemTemplate>
                <DataTemplate DataType="{x:Type vm:CardViewModel}" xmlns:vm="clr-namespace:MemoryGame.UI.ViewModels">
                    <Border
                        Width="80" Height="80" Margin="6"
                        Background="#2b2b2b"
                        CornerRadius="8"
                        BorderBrush="#444"
                        BorderThickness="1"
                        Tag="{Binding Id}">
                        <Border.InputBindings>
                            <MouseBinding
                                MouseAction="LeftClick"
                                Command="{Binding DataContext.FlipCommand, RelativeSource={RelativeSource AncestorType=ItemsControl}}"
                                CommandParameter="{Binding Id}" />
                        </Border.InputBindings>
                        <TextBlock
                            FontSize="28"
                            Foreground="White"
                            HorizontalAlignment="Center"
                            VerticalAlignment="Center"
                            >
                            <TextBlock.Style>
                                <Style TargetType="TextBlock">
                                    <Setter Property="Text" Value="🂠" />
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding IsFlipped}" Value="True">
                                            <Setter Property="Text" Value="{Binding Symbol}" />
                                        </DataTrigger>
                                        <DataTrigger Binding="{Binding IsMatched}" Value="True">
                                            <Setter Property="Text" Value="{Binding Symbol}" />
                                            <Setter Property="Foreground" Value="#6cff9b" />
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </TextBlock.Style>
                        </TextBlock>
                    </Border>
                </DataTemplate>
            </ItemsControl.ItemTemplate>
        </ItemsControl>
    </DockPanel>
</Window>